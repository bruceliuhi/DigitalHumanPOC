# 🚀 银行助手数字人 - 快速启动指南

## 📋 项目简介

这是一个完整的银行数字人助手应用，支持三语言（普通话/粤语/英语），包含信用卡预审、开户预约、智能问答三大服务模块，以及完整的转人工状态系统。

---

## ⚡ 快速启动（3步）

### 1️⃣ 安装依赖
```bash
pnpm install
# 或使用 npm
npm install
```

### 2️⃣ 启动开发服务器
```bash
pnpm dev
# 或使用 npm
npm run dev
```

### 3️⃣ 打开浏览器
```
http://localhost:5173
```

---

## 🎯 核心功能测试

### ✅ 首页功能
1. 打开应用后会看到数字人背景
2. 右上角可切换语言：**普通话 / 粤语 / English**
3. 底部有三个服务卡片（iOS风格）

### ✅ 信用卡智能预审
1. 点击第一个卡片"信用卡智能预审"
2. 点击"开始评估"
3. 回答3个问题（点击"是"或"否"）
4. 查看评估结果和案件ID

### ✅ 开户/分行预约
1. 点击第二个卡片"开户 / 分行预约"
2. 点击"开始预约"
3. 选择服务类型（4选1）
4. 选择预约时间
5. 确认预约
6. 查看预约成功页和预约ID

### ✅ 银行智能服务问答 ⭐ 核心功能
1. 点击第三个卡片"银行智能服务问答"
2. 观察顶部蓝色状态徽章：**"🤖 AI 辅助处理中"**
3. 测试FAQ匹配：
   - 点击任意快捷FAQ按钮
   - 查看回答（根据当前语言显示）
4. 测试转人工功能：
   - 点击"切换到文字"
   - 输入一个不在FAQ中的问题："我想买股票"
   - 观察转人工流程：
     - ⏳ 状态徽章变黄：**"转人工中（Demo）"**
     - 💬 数字人播报转人工消息
     - 📋 显示黄色转人工状态卡片
     - ✅ 2秒后变绿：**"已转人工（Demo）"**

---

## 🌐 三语言测试

### 切换语言位置
- **首页**：右上角语言选择器
- **其他页面**：通过返回首页切换

### 验证内容
1. 切换到"普通话"，测试所有页面
2. 切换到"粤语"，验证地道粤语表达
3. 切换到"English"，验证英文界面

### 粤语特色表达
- 普通话："点击语音提问"
- 粤语："撳語音提問"（更地道）
- 普通话："正在聆听..."
- 粤语："聽緊你講..."（更口语化）

---

## 📊 FAQ知识库测试

### 可以匹配的问题（20条）
输入以下关键词可命中FAQ：

#### 开户相关
- "开户需要什么文件"
- "年龄限制"
- "存钱怎么办"

#### 分行服务
- "营业时间"
- "周末上班吗"

#### 信用卡
- "信用卡申请条件"
- "年费多少"
- "账单日"
- "怎么还款"

#### 贷款理财
- "贷款服务"
- "贷款需要什么资料"
- "理财产品"
- "外币兑换"

#### 账户管理
- "银行卡丢了"
- "修改个人信息"
- "网银怎么开通"
- "转账限额"
- "销户"

#### 客服相关
- "支持哪些语言"
- "客服电话"

### 会触发转人工的问题
输入以下问题会自动转人工：
- "我想买股票"
- "帮我办理护照"
- "今天天气怎么样"
- "你叫什么名字"
- 任何不在FAQ知识库中的问题

---

## 🎨 设计风格特点

### Apple iOS 风格
- **玻璃拟态效果**：半透明背景 + 模糊效果
- **大圆角**：16-22px圆角
- **柔和配色**：去饱和中性色 + 柔和强调色
- **微妙阴影**：环境光阴影效果
- **平滑动画**：点击缩放、平滑过渡

### 服务卡片配色
- 🟡 **信用卡**：金色（高端、可信赖）
- 🔵 **预约**：蓝色（专业、稳定）
- 🟢 **问答**：青色（智能、友好）

### 转人工状态配色
- 🔵 **AI辅助**：蓝色（科技感）
- 🟡 **转人工中**：黄色（提示注意）
- 🟢 **已转人工**：绿色（成功状态）

---

## 🔍 审计日志功能

### 如何查看
1. 进入任意服务页面（信用卡/预约/FAQ）
2. 点击右上角"📋 审计日志"
3. 展开面板查看所有交互事件

### 日志内容
- 事件时间戳
- 事件类型（PAGE_LOADED, USER_ANSWER, FAQ_MATCHED等）
- 事件详细数据

### 导出日志
- 点击"复制 JSON"按钮
- 粘贴到文本编辑器查看完整JSON

---

## 🐛 故障排查

### 问题1：页面空白
**原因**：可能是依赖未安装完全
**解决**：
```bash
rm -rf node_modules
pnpm install
pnpm dev
```

### 问题2：路由404
**原因**：Vite配置问题
**解决**：确认 `vite.config.ts` 中有正确的 `@` 别名配置

### 问题3：语言切换无效
**原因**：LanguageContext未正确包裹
**解决**：检查 `App.tsx` 中是否有 `<LanguageProvider>` 包裹

### 问题4：转人工功能不触发
**原因**：输入的问题命中了FAQ
**解决**：输入完全不相关的问题，如"我想买股票"、"天气怎么样"

### 问题5：图片不显示
**原因**：Figma资源路径问题
**解决**：确认使用 `figma:asset` scheme导入图片

---

## 📁 关键文件位置

### 如果需要修改...

#### 修改首页文本
```
/src/app/pages/Home.tsx
→ 搜索 "texts = {"
→ 修改对应语言的文本
```

#### 添加/修改FAQ
```
/src/data/faqData.ts
→ 在 faqData 数组中添加新对象
→ 格式：{ id, q, qZh, qYue, qEn, keywords, a, aZh, aYue, aEn }
```

#### 修改转人工消息
```
/src/app/pages/FAQ.tsx
→ 搜索 "transferMessage"
→ 修改对应语言的消息文本
```

#### 修改样式主题
```
/src/styles/theme.css
→ 修改CSS变量
→ 调整配色、间距等
```

#### 修改服务卡片图标颜色
```
/src/app/pages/Home.tsx
→ 搜索 "rgba(218, 165, 32"（金色）
→ 搜索 "rgba(59, 130, 246"（蓝色）
→ 搜索 "rgba(34, 211, 238"（青色）
```

---

## 💡 使用技巧

### 技巧1：快速测试转人工
```
1. 进入FAQ页面
2. 切换到文字模式
3. 输入："xyz123"（随机字符）
4. 立即触发转人工流程
```

### 技巧2：批量测试FAQ
```
1. 打开审计日志面板
2. 依次点击前3个快捷FAQ
3. 在日志中查看匹配记录
4. 复制JSON查看详细数据
```

### 技巧3：语言切换测试
```
1. 在首页切换语言
2. 进入FAQ页面
3. 点击同一个FAQ按钮
4. 观察答案语言是否正确切换
```

### 技巧4：完整流程演示
```
推荐顺序：
1. 首页 → 切换到粤语
2. 信用卡预审 → 完成4步流程
3. 返回首页 → 切换到English
4. 开户预约 → 完成预约流程
5. 返回首页 → 切换到普通话
6. FAQ页面 → 测试转人工功能
```

---

## 🎬 演示脚本（3分钟）

### 第1分钟：首页和语言切换
```
1. 打开应用："大家好，这是一个银行数字人助手"
2. 展示数字人背景："采用Apple iOS设计风格"
3. 切换语言："支持普通话、粤语、英语三种语言"
4. 介绍三个服务卡片："信用卡预审、开户预约、智能问答"
```

### 第2分钟：服务流程演示
```
1. 点击"信用卡智能预审"
2. 快速完成3个问题："演示4步流程"
3. 展示结果页和案件ID
4. 返回首页，点击"银行智能服务问答"
```

### 第3分钟：转人工功能 ⭐
```
1. 展示顶部状态徽章："目前是AI辅助处理"
2. 点击快捷FAQ："演示FAQ匹配"
3. 切换到文字模式
4. 输入"我想买股票"
5. 演示转人工流程：
   - "状态变为转人工中"
   - "显示转人工消息"
   - "出现状态卡片"
   - "最终变为已转人工"
6. 总结："无法匹配FAQ时自动转人工"
```

---

## 📊 技术栈

### 核心技术
- **React 18.3.1** - UI框架
- **TypeScript** - 类型安全
- **Tailwind CSS v4** - 样式系统
- **React Router v7** - 路由管理
- **Vite 6** - 构建工具

### UI组件
- **Lucide React** - 图标库
- **Radix UI** - 无障碍组件
- **Motion** - 动画库

### 代码特点
- ✅ 完全类型安全（TypeScript）
- ✅ 组件化设计
- ✅ 响应式布局
- ✅ 性能优化
- ✅ 易于扩展

---

## 🔗 相关文档

- **完整代码清单**：`/PROJECT_SUMMARY.md`
- **功能检查清单**：`/CODE_CHECKLIST.md`
- **快速启动指南**：`/QUICK_START.md`（本文档）

---

## 📞 常见问题

### Q1: 如何部署到生产环境？
```bash
pnpm build
# 构建产物在 dist/ 目录
# 上传到静态托管服务（Vercel, Netlify等）
```

### Q2: 如何集成真实的API？
```
修改 /src/services/mockApi.ts
将 Mock 函数替换为实际的 fetch 调用
```

### Q3: 如何集成腾讯云数字人SDK？
```
1. 安装SDK：npm install tencent-digital-human-sdk
2. 在 /src/utils/DigitalMan.js 中集成
3. 修改各页面的 voiceStatus 逻辑
4. 添加WebSocket连接
```

### Q4: FAQ数据可以从后端获取吗？
```
可以！修改 /src/data/faqData.ts：
1. 导出一个 fetchFAQData() 函数
2. 在组件中使用 useEffect 调用
3. 将数据存储到 useState
```

### Q5: 转人工功能可以连接真实客服吗？
```
可以！需要：
1. 建立WebSocket连接
2. 发送转人工请求到后端
3. 后端分配客服并返回
4. 前端接收消息并显示
```

---

## 🎉 开始使用

现在你已经了解了所有核心功能！

**运行命令：**
```bash
pnpm dev
```

**访问地址：**
```
http://localhost:5173
```

**享受构建的乐趣！** 🚀

---

**最后更新：** 2025-01-24
**版本：** v1.0.0
**状态：** ✅ 可运行
